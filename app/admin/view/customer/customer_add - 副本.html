{extend name="admin@public/base" /}
{block name="main-content"}
<div class="page-content">
	<!--主题-->
	<div class="page-header">
		<h1>
			您当前操作
			<small>
				<i class="ace-icon fa fa-angle-double-right"></i>
				添加项目
			</small>
		</h1>
	</div>

	<style>
		#contract_customer
		{
			border: 1px #bbbbbb dashed;
			border-radius: 150px;
			background-color: #eeeeee;
		}

		#customer_payment_info1
		{
			border-radius: 150px;
			border: 1px #bbbbbb dashed;
			padding-top: 5px;
		}

		.span_word
		{
			color: #438EB9;
		}

		.add_div_statu
		{
			display: none;
		}
	</style>
	<div class="row">
		<div class="col-xs-12">
			<form class="form-horizontal ajaxForm2" name="form0" method="post" action="{:url('admin/customer/customer_runadd')}"  enctype="multipart/form-data">
				<input type="hidden" name="n_id" id="n_id" value="" />

				<!--客戶名称-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 项目名：  </label>
					<div class="col-sm-10">
						<input type="text" name="customer_title" id="customer_title"  value=""   class="col-xs-10 col-sm-6" required/>
					</div>
				</div>
				<div class="space-4"></div>
				<!--客戶名称-->

				<!--客戶名称-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 项目编码：  </label>
					<div class="col-sm-10">
						<input type="text" name="contract_number" id="contract_number"  value=""   class="col-xs-10 col-sm-6" required/>
					</div>
				</div>
				<div class="space-4"></div>
				<!--客戶名称-->

				<!--项目名    下拉样式-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 公司：</label>
					<div class="col-sm-8">
						<select name="company_id"  class="col-sm-3 " required>
							<option value="">请选择项目名字</option>
							{foreach name="company_info" item="vo"}
							<option value="{$vo.company_id}"  >{$vo.company_name} </option>
							{/foreach}
						</select>
						<span class="lbl span_word">&nbsp;&nbsp;温馨提示：若未找到相应“公司名”，可以添加公司，待系统管理员审核之后即可选取<br /></span>
					</div>
				</div>
				<div class="space-4"></div>
				<!--项目名    下拉样式-->

				<!--服务项目    下拉样式-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 服务项目：</label>
					<div class="col-sm-8">
						<select name="customer_service_items"  class="col-sm-3 " required>
							<option value="">请选择服务项目</option>
							{foreach name="customer_service_items" item="vo"}
							<option value="{$vo.service_items_id}"  >{$vo.service_items_name} </option>
							{/foreach}
						</select>
						<span class="lbl span_word">&nbsp;&nbsp;温馨提示：若未找到相应“服务项目”，请联系系统管理员<br /></span>
					</div>
				</div>
				<div class="space-4"></div>
				<!--服务项目    下拉样式-->

				<!--服务项目    下拉样式-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 服务项目：</label>
					<div class="col-sm-8">

						<select name="select1" class="col-sm-2" onchange = "changeCountry()">
							<option>日本</option>
						</select>
						<select name = "select2"  class="col-sm-2" style="margin-left: 50px;">
							<option>黄</option>
						</select>
					</div>
				</div>
				<div class="space-4"></div>
				<!--服务项目    下拉样式-->

				<!--信用等级    下拉样式-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 信用等级：</label>
					<div class="col-sm-8">
						<select name="customer_credit_rating"  class="col-sm-3 " required>
							<option value="">请选择项目信用等级</option>
							{foreach name="customer_credit_rating" item="vo"}
							<option value="{$vo.credit_rating_id}" >{$vo.credit_rating_name} </option>
							{/foreach}
						</select>
						<span class="lbl span_word">&nbsp;&nbsp;温馨提示：若未找到相应“信用等级”，请联系系统管理员<br /></span>
					</div>
				</div>
				<div class="space-4"></div>
				<!--信用等级    下拉样式-->

				<!--对接人    下拉样式-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 商务对接人：</label>
					<div class="col-sm-8">
						<select name="customer_waiter_1"  class="col-sm-3 " required>
							<option value="">请选择商务对接人</option>
							{foreach name="customer_waiter_1" item="vo"}
							<option value="{$vo.customer_waiter_id}"  >{$vo.customer_waiter_name} </option>
							{/foreach}
						</select>
						<span class="lbl span_word">&nbsp;&nbsp;温馨提示：若未找到相应“商务对接人”，请联系系统管理员<br /></span>
					</div>
				</div>
				<div class="space-4"></div>
				<!--对接人    下拉样式-->

				<!--对接人    下拉样式-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 技术对接人：</label>
					<div class="col-sm-8">
						<select name="customer_waiter_2"  class="col-sm-3 " required>
							<option value="">请选择技术对接人</option>
							{foreach name="customer_waiter_2" item="vo"}
							<option value="{$vo.customer_waiter_id}"  >{$vo.customer_waiter_name} </option>
							{/foreach}
						</select>
						<span class="lbl span_word">&nbsp;&nbsp;温馨提示：若未找到相应“技术对接人”，请联系系统管理员<br /></span>
					</div>
				</div>
				<div class="space-4"></div>
				<!--对接人    下拉样式-->

				<!--项目状态    下拉样式-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 选择项目状态：</label>
					<div class="col-sm-8">
						<select name="customer_status" id="is_cooperation" onchange="is_cooperation();"  class="col-sm-3" required>
							<option value="">请选择项目状态</option>
							{foreach name="customer_status" item="vo"}
							<option value="{$vo.customer_status_id}" >{$vo.customer_status_name} </option>
							{/foreach}
						</select>
						<span class="lbl span_word">&nbsp;&nbsp;温馨提示：若未找到相应“项目状态”，请联系系统管理员<br /></span>
					</div>
				</div>
				<div class="space-4"></div>
				<!--项目状态    下拉样式-->

<!--签约项目-->

				<div id="contract_customer" class="add_div_statu">
				<!--回款周期    下拉样式-->
					<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 选择回款周期：</label>
					<div class="col-sm-8">
						<select name="customer_collection_period"  class="col-sm-3 " id="customer_collection_period_id">
							<option value="">请选择回款周期</option>
							{foreach name="customer_collection_period" item="vo"}
							<option value="{$vo.collection_period_id}" >{$vo.collection_period_name} </option>
							{/foreach}
						</select>
						<span class="lbl span_word">&nbsp;&nbsp;若回款金额不按比例回款，'选择回款周期'项 选择 '无规律性付款'<br /></span>
					</div>
					</div>
					<div class="space-4"></div>
				<!--回款周期    下拉样式-->

				<!--回款类型    下拉样式-->
					<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 选择回款类型：</label>
					<div class="col-sm-8">
						<select name="customer_payment_type_id"  class="col-sm-3 " id="customer_payment_type_id" required>
							<option value="99">请选择回款类型</option>
							{foreach name="customer_payment_type" item="vo"}
							<option value="{$vo.customer_payment_type_id}" >{$vo.customer_payment_type_name} </option>
							{/foreach}
						</select>
					</div>
					</div>
					<div class="space-4"></div>
				<!--回款类型    下拉样式-->


					<div id="customer_payment_info1" class="add_div_statu">
						<!--客戶名称-->
						<div class="form-group">
							<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 自定义回款类型：  </label>
							<div class="col-sm-10">
								<span class="lbl span_word">&nbsp;&nbsp;
									输入规则&nbsp;&nbsp;
									回款金额：5200|5688|9877&nbsp;&nbsp;
									回款日期：20170908|20171010|20171210&nbsp;&nbsp;
									回款金额和回款日期一一对应；中间用竖线隔开
									<br />
								</span>
							</div>
						</div>
						<div class="space-4"></div>

						<div class="form-group">
							<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 回款金额：  </label>
							<div class="col-sm-10">
								<input type="text" name="customer_payment_info_money"   value=""   class="col-xs-10 col-sm-6"/>
							</div>
						</div>
						<div class="space-4"></div>
						<div class="form-group">
							<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 回款日期：  </label>
								<div class="col-sm-10">
									<input type="text" name="customer_payment_info_date"   value=""   class="col-xs-10 col-sm-6"/>
								</div>
						</div>
						<div class="space-4"></div>
						<!--客戶名称-->
					</div>


				<!--合同周期    下拉样式-->
					<div class="form-group">
						<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 选择合同周期：</label>
						<div class="col-sm-8">
							<select name="customer_contract_cycle_id"  class="col-sm-3 customer_contract_cycle_id" id="customer_contract_cycle_id">
								<option value="">请选择合同周期</option>
								{foreach name="customer_contract_cycle" item="vo"}
								<option value="{$vo.customer_contract_cycle_id}" >{$vo.customer_contract_cycle_name} </option>
								{/foreach}
							</select>
						</div>
					</div>
					<div class="space-4"></div>
				<!--合同周期    下拉样式-->

					<!--签约金额-->
					<div class="form-group" id="customer_cpprice_idid">
						<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 签约金额：  </label>
						<div class="col-sm-10">
							<input type="number" name="customer_cpprice" id="customer_cpprice"  value=""   placeholder="输入签约总金额" class="col-xs-10 col-sm-6" />
						</div>
					</div>
					<div class="space-4"></div>
					<!--签约金额-->


					<!--签约日期-->
					<div class="form-group">
						<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 签约时间：  </label>
						<div class="col-sm-10">
							<input name="customer_contract_time" class="date-picker col-xs-10 col-sm-2" value="" type="text" data-date-format="yyyy-mm-dd">
						</div>
					</div>
					<div class="space-4"></div>
					<!--签约日期-->

					<!--执行日期-->
					<div class="form-group">
						<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 执行时间：  </label>
						<div class="col-sm-10">
							<input id="customer_execution_time" name="customer_execution_time" class="date-picker col-xs-10 col-sm-2" value="" type="text" data-date-format="yyyy-mm-dd">

							&nbsp;&nbsp;&nbsp;&nbsp;
							<!-- 点击添加模态框（Modal） -->
							<button class="btn btn-sm customer_expiration_date_edit" data-toggle="modal" data-target="#myModal" style="float: none;">
								<i class="ace-icon fa fa-bolt bigger-110"></i>
								合成到期时间
							</button>
							<!-- 点击添加模态框（Modal） -->
							<span class="lbl span_word">&nbsp;&nbsp;输入“签约时间”和“执行时间”，可自动合成“到期时间”<br /></span>
						</div>
					</div>
					<div class="space-4"></div>
					<!--执行日期-->

					<!--到期时间-->
					<div class="form-group" id="customer_expiration_date_come" style="display: none;">
						<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 到期时间：  </label>
						<div class="col-sm-10">
							<input id="customer_expiration_date" name="customer_expiration_date" class="col-xs-10 col-sm-2" value="" type="text" data-date-format="yyyy-mm-dd">
						</div>
					</div>
					<div class="space-4"></div>
					<!--到期时间-->

					<!--账户-->
					<div class="form-group" id="">
						<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 账户：  </label>
						<div class="col-sm-10">
							<select name="account"  class="col-sm-3 " required>
								<option value="3">暂不定义</option>
								<option value="1"  >多蓝 </option>
								<option value="2"  >数蓝 </option>
							</select>
							<span class="lbl span_word">&nbsp;&nbsp;收款账户<br /></span>
						</div>
					</div>
					<div class="space-4"></div>
					<!--账户-->

					<!--结算方式说明-->
					<div class="form-group">
						<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 甲方签署人：  </label>
						<div class="col-sm-10">
							<input type="text" name="signatory" value=""  class="col-xs-10 col-sm-6"/>
							<span class="lbl span_word">&nbsp;&nbsp;甲方签署人（人名）<br /></span>
						</div>
					</div>
					<div class="space-4"></div>
					<!--结算方式说明-->

					<div class="form-group">
						<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 甲方手机号：  </label>
						<div class="col-sm-10">
							<input type="number" name="first_party_tel" id="first_party_tel" placeholder="请输入甲方对接人手机号码" class="col-xs-10 col-sm-5" required/>
							<span class="lbl col-xs-12 col-sm-7"><span class="red">*</span>请输入公司手机号，只能填写数字</span>
						</div>
					</div>
					<div class="space-4"></div>

				</div>
				<!--签约项目-->

				<!--结算方式说明-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 结算方式说明：  </label>
					<div class="col-sm-10">
						<input type="text" name="statement_of_settlement" id="statement_of_settlement"  value=""  class="col-xs-10 col-sm-6"/>
						<span class="lbl span_word">&nbsp;&nbsp;结算方式说明<br /></span>
					</div>
				</div>
				<div class="space-4"></div>
				<!--结算方式说明-->

				<!--显示日期-->
				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 显示日期：  </label>
					<div class="col-sm-10">
						<input name="showdate" class="date-picker col-xs-10 col-sm-2" value="{php}$time = time();echo date("Y-m-d",$time){/php}"
						type="text" data-date-format="yyyy-mm-dd">
						<span class="lbl span_word">&nbsp;&nbsp;项目列表按时间倒序排列，修改显示时间决定优先排序<br /></span>
					</div>
				</div>
				<div class="space-4"></div>
				<!--显示日期-->

				<div class="form-group">
					<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 项目简介：  </label>
					<div class="col-sm-10">
						<script src="__PUBLIC__/ueditor/ueditor.config.js" type="text/javascript"></script>
						<script src="__PUBLIC__/ueditor/ueditor.all.js" type="text/javascript"></script>
						<textarea name="customer_content" rows="100%" style="width:80%;min-height: 400px;" id="myEditor"></textarea>
						<script type="text/javascript">
							var editor = new UE.ui.Editor();
							editor.render("myEditor");
						</script>
					</div>
				</div>
				<div class="space-4"></div>

				<div class="clearfix form-actions">
					<div class="col-md-offset-3 col-md-9">
						<button class="btn btn-info" type="submit">
							<i class="ace-icon fa fa-check bigger-110"></i>
							保存
						</button>

						&nbsp; &nbsp; &nbsp;
						<button class="btn" type="reset">
							<i class="ace-icon fa fa-undo bigger-110"></i>
							重置
						</button>
					</div>
				</div>
		</form>
	</div>
</div>
	</div>
{/block}
{block name="scripts"}
<script>
	$("#is_cooperation").change(function ()
	{
		var is_cooperation = $("#is_cooperation option:selected").val();
		if(is_cooperation == 6)
		{
			$('#contract_customer').show();
		}
		else
		{
			$('#contract_customer').hide();
		}
	});

	$("#customer_collection_period_id").change(function ()
	{
		var customer_collection_period_id = $("#customer_collection_period_id option:selected").val();
		if(customer_collection_period_id == 12)
		{
			$('#customer_payment_type_id').val(3);
			$('#customer_payment_info1').show();
			$('#customer_cpprice_idid').hide();

		}
		else
		{
			$('#customer_payment_type_id').val(1);
			$('#customer_payment_info1').hide();
			$('#customer_cpprice_idid').show();
		}
	});

	$('.date-picker').datepicker({
		autoclose: true,
		todayHighlight: true,
	})


	/**
	 * 二级联动
	 */
	function changeCountry(){
		var sel1 = document.forms[0].select1;
		var sel2 = document.forms[0].select2;
		if(sel1.options[sel1.selectedIndex].text == "中国")
		{
			if(sel2.options.length != 0)
			{
				sel2.options.length = 0;
				sel2.options[0] = new Option("蓝","0");
				sel2.options[1] = new Option("黄","1");
			}
		}
		else if(sel1.options[sel1.selectedIndex].text == "日本")
		{
			if(sel2.options.length != 0)
			{
				sel2.options.length = 0;
				sel2.options[0] = new Option("黑","0");
				sel2.options[1] = new Option("紫","1");
			}
		}
		else if(sel1.options[sel1.selectedIndex].text == "美国")
		{
			if(sel2.options.length != 0)
			{
				sel2.options.length = 0;
				sel2.options[0] = new Option("红","0");
				sel2.options[1] = new Option("白","1");
			}
		}
	}

</script>
{/block}
